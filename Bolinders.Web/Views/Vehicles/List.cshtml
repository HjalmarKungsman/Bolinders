@model VehicleListViewModel
@using Bolinders.Core.Enums

<div class="row" style="margin: 20px 0 0 0;">
    <form method="post" asp-action="list" asp-controller="vehicles">
        <div class="col-md-12">
            <div class="form-group">
                <label for="searchText">Söktext</label>
                <input type="text" class="form-control input-sm" id="searchText" name="searchText" placeholder="Söktext" value="@ViewBag.SearchText" />
            </div>
        </div>
        
        <div id="moreSearchOptions" class="hidden">
            <div class="col-md-4">
                <div class="form-group">
                    <label for="priceFrom">Pris från</label>
                    <input type="number" class="form-control input-sm" id="priceFrom" name="priceFrom" placeholder="Pris från" value="@ViewBag.PriceFrom" />
                </div>
                <div class="form-group">
                    <label for="mileFrom">Mil från</label>
                    <input type="number" class="form-control input-sm" id="mileageTo" name="mileageFrom" placeholder="Mil från" value="@ViewBag.MileageFrom" />
                </div>
                <div class="form-group">
                    <label for="yearFrom">År från</label>
                    <input type="number" class="form-control input-sm" id="yearFrom" name="yearFrom" placeholder="År från" value="@ViewBag.YearFrom" />
                </div>
            </div>
            <div class="col-md-4">
                <div class="form-group">
                    <label for="priceTo">Pris till</label>
                    <input type="number" class="form-control input-sm" id="priceTo" name="priceTo" placeholder="Pris till" value="@ViewBag.PriceTo" />
                </div>
                <div class="form-group">
                    <label for="mileTo">Mil till</label>
                    <input type="number" class="form-control input-sm" id="mileageTo" name="mileageTo" placeholder="Mil till" value="@ViewBag.MileageTo" />
                </div>
                <div class="form-group">
                    <label for="yearTo">År till</label>
                    <input type="number" class="form-control input-sm" id="yearTo" name="yearTo" placeholder="År till" value="@ViewBag.YearTo" />
                </div>
            </div>
            <div class="col-md-4">
                <div class="form-group">
                    <label for="bodyType">Kaross</label>
                    <select id="bodyType" name="bodyType" class="form-control input-sm" asp-items="Html.GetEnumSelectList<BodyType>()"></select>
                </div>
                <div class="form-group">
                    <label for="gearbox">Växellåda</label>
                    <select id="gearbox" name="gearbox" class="form-control input-sm" asp-items="Html.GetEnumSelectList<Gearbox>()"></select>
                </div>
            </div>
        </div>

        <div class="text-center col-lg-12">
            <a class="toggle-searchOptions" href="#"><span class="fa fa-angle-down" style="font-size:xx-large"></span></a>
        </div>

        <div class="form-group">
            <input type="hidden" id="page" name="page" value="1" />
            <input type="submit" class="btn btn-default pull-right" value="Hitta">
        </div>

    </form>
</div>


<p>Din sökning gav @Model.Pager.TotalItems träffar</p>
<hr />

<div class="row">
    @foreach (var p in Model.Vehicles)
    {
        @Html.Partial("VehicleBlock", p)
    }
</div>
@if (Model.Pager.TotalItems == 0)
{

    <p class="text-center" style="font-size:x-large"><strong>Tyvärr matchade din sökning/filtrering inga bilar</strong></p>

}
@if (Model.Pager.TotalItems > 8)
{
    <div page-model="@Model"
         page-action="List"
         enable-page-classes="true"
         page-class="btn"
         page-class-normal="btn-default"
         page-class-selected="btn-primary"
         class="btn-group"></div>
}
   


<script>
    $(document).ready(function () { 
        $('.toggle-searchOptions').on('click', function () {

            var up = 'fa-angle-up';
            var down = 'fa-angle-down';
            var span = $('.toggle-searchOptions span').first();
        console.log(span)
            $('#moreSearchOptions').toggleClass('hidden');
            if (span.hasClass(down)) {
                span.removeClass(down);
                span.addClass(up);
            }
            else {
                span.removeClass(up);
                span.addClass(down);
            }
        });
    });
</script>